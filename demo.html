<!DOCTYPE html>
<html>

<head>
  <title>Demo</title>
  <style>
    html {
      color-scheme: light dark;
    }
  </style>
</head>

<body>
  <script src="dist/portal_manager.js"></script>
  <script>
    const PortalManager = portal_manager.default;

    const pm = new PortalManager();
    const d1 = pm.createElementPortal('div');
    const d2 = pm.createElementPortal('div');
    pm.appendChild(d1, d2);
    const pd1 = pm.unsafeElementMap.get(d1);
    const pd2 = pm.unsafeElementMap.get(d2);
    if (pd1 === undefined) {
        throw new Error('pd1 undefined');
    }
    if (pd2 === undefined) {
        throw new Error('pd2 undefined');
    }
    const d1Template = document.createElement('div');
    const ph = document.createElement('portal-placeholder');
    ph.setPortalID(pd2.portalID);
    d1Template.appendChild(ph);
    debugger;
    // const pm = new PortalManager();
    // const d = document.createElement('div');
    // d.style.width = '100%';
    // d.style.display = 'flex';
    // d.style.flexDirection = 'row';
    // d.style.fontSize = '0.5em';
    // d.style.marginTop = 'auto';
    // d.style.marginBottom = 'auto';
    // d.style.justifyContent = 'center';
    // const b = document.createElement('img');
    // b.style.width = '50%';
    // b.style.height = '50%';
    // b.src = 'https://senseis.xmp.net/diagrams/15/1767305ca690294311ed6e1847b8f8a4.png';
    // b.style.margin = '1em';
    // d.appendChild(b);
    // const p1 = pm.appendChildPortal(document.body, d);
    // const p2 = pm.appendChildPortal(p1, p1);
    
    // function randomColor() {
    //   return '#' + Math.floor(Math.random()*16777215).toString(16);
    // }
    // function changeColors() {
    //   pe.childNodes[0].
    //   b.style.background = randomColor();
    // }
    // debugger;
    // // // p1.appendChild(p1);
    // // // p.appendChild(p);
  </script>
  <button onclick="changeColors()">Change Colors</button>
</body>

</html>