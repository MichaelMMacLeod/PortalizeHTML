<!DOCTYPE html>
<html>

<head>
  <title>Demo</title>
  <style>
    html {
      color-scheme: light dark;
    }
  </style>
</head>

<body>
  <script src="dist/portal_manager.js"></script>
  <script>
    document.documentElement.style.width = '100%';
    document.documentElement.style.height = '100%';
    document.body.style.height = '100%';
    document.body.style.width = '100%';
    const PortalManager = portal_manager.default;

    const pm = new PortalManager();
    const d = pm.createElement('div');
    const dTemplate = pm.templateOf(d);
    dTemplate.style.width = '50%';
    dTemplate.style.height = '100%';
    dTemplate.style.background = 'rgba(0,0,0,0.1)';
    dTemplate.style.display = 'flex';
    pm.appendChild(d, d);
    pm.rootAppendChild(document.body, d);
    pm.render();
    
    setInterval(() => {
      const template = pm.templateOf(d);
      if (template.style.flexDirection === 'row') {
        template.style.flexDirection = 'column';
      } else {
        template.style.flexDirection = 'row';
      }
      pm.render();
    }, 1000);

    // const pm = new PortalManager();
    // let d = pm.createElementPortal('div');
    // d.style.width = '60%';
    // d.style.height = '100%';
    // d.style.background = 'rgba(0,0,0,0.1)';
    // d.style.display = 'flex';
    // d.style.flexDirection = 'row';
    // pm.observeNodeChanged(d);
    // d = pm.appendChild(d, d);
    // d = pm.appendChild(document.body, d);



    // const pm = new PortalManager();
    // const d = document.createElement('div');
    // d.style.width = '100%';
    // d.style.display = 'flex';
    // d.style.flexDirection = 'row';
    // d.style.fontSize = '0.5em';
    // d.style.marginTop = 'auto';
    // d.style.marginBottom = 'auto';
    // d.style.justifyContent = 'center';
    // const b = document.createElement('img');
    // b.style.width = '50%';
    // b.style.height = '50%';
    // b.src = 'https://senseis.xmp.net/diagrams/15/1767305ca690294311ed6e1847b8f8a4.png';
    // b.style.margin = '1em';
    // d.appendChild(b);
    // const p1 = pm.appendChildPortal(document.body, d);
    // const p2 = pm.appendChildPortal(p1, p1);
    
    // function randomColor() {
    //   return '#' + Math.floor(Math.random()*16777215).toString(16);
    // }
    // function changeColors() {
    //   pe.childNodes[0].
    //   b.style.background = randomColor();
    // }
    // debugger;
    // // // p1.appendChild(p1);
    // // // p.appendChild(p);
  </script>
</body>

</html>